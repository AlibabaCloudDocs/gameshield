# 隧道加密模式 {#concept_a13_z2f_xdb .concept}

## 一、什么是隧道加密模式，开启后有什么好处？ {#section_ybc_1ff_xdb .section}

隧道加密模式是由SDK接管客户端和服务端之间的通信，且将流量完全加密的一种接入模式，尤其是针对协议模拟型的攻击也会免疫，只有游戏盾加密的合法流量才会被游戏盾放行，按照此种模式接入游戏盾将会对CC攻击彻底免疫，零误杀、零漏过。

**说明：** 开启后副作用：建立TCP连接会消耗4个RTT时长，完成TCP连接建立会消耗更多时间（100ms以内），数据传输过程不会增加时延。

## 二、如何开启隧道加密模式？ {#section_zbc_1ff_xdb .section}

您可以参考以下操作步骤，开启隧道加密模式：

1.  确认该业务已经启用游戏安全网关。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13519/3560_zh-CN.png)

2.  联系游戏盾技术支持团队，开启该游戏业务的SDK的隧道加密模式。
3.  在业务管理页面，单击该游戏安全网关集群的**防护设置**，定位到**加密安全隧道**功能项，启用隧道加密模式，并设置**客户端覆盖率**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13519/3561_zh-CN.png)


## 三、开启隧道加密模式的注意事项 {#section_h45_rkf_xdb .section}

-   必须使用游戏盾SDK的返回的IP和端口进行游戏的连接建立，隧道加密模式下的游戏IP会是**127.0.0.1**，游戏端口则是**随机端口**。
-   隧道加密模式为针对单个游戏生效，如果一个游戏下有多个业务，开启后该游戏的多个业务均会开启SDK隧道加密，如果由冲突则需要建立多个游戏来区分。
-   是否免疫CC攻击取决于是否开启了仅允许隧道加密的流量经过游戏盾，只有开启了这个处罚才能实现免疫CC攻击。

## 四、不开启隧道加密模式如何防御CC攻击？ {#section_rkn_5kf_xdb .section}

游戏盾的CC攻击防御依赖游戏安全网关模块，在未接入SDK的隧道加密模式情况下的CC攻击防御有如下几个手段，且需要联系游戏盾团队人工配置：

1.  端口的针对IP的新建、并发的限制（存在误杀和漏过情况）。
2.  端口上的协议白名单模式，通过协议检查，仅允许您的游戏协议通过（TCP、WS协议防护较好，HTTP协议防护效果较差）。具体详情，请参考[协议过滤配置](intl.zh-CN/用户指南/协议白名单过滤配置.md#)。
3.  IP黑名单、区域封禁、IDC高危区域封禁等功能，进行区域封禁（基于IP地址库的，存在误杀、漏过）。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13519/3563_zh-CN.png)

因此，在不接入游戏盾SDK的隧道加密模式下的CC防护效果无法做到100%。

